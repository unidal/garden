<html lang="zh"><head><meta name="flattr:id" content="1ew3x0"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "url": "http://plantuml.com",
  "name": "PlantUML",
  "sameAs" : ["https://twitter.com/plantuml","https://en.wikipedia.org/wiki/PlantUML","https://www.wikidata.org/wiki/Q18346546", "https://plus.google.com/+PlantumlPublic/"],
  "logo": "http://plantuml.com/logo3.png",
  "contactPoint": [{
    "@type": "ContactPoint",
    "email": "plantuml@gmail.com",
    "url": "http://plantuml.com",
    "contactType": "customer service"
  }],
    "potentialAction": {
    "@type": "SearchAction",
    "target": "https://cse.google.fr/cse/publicurl?cx=002267040093494634259:o59itilhnna&q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "item": {
      "@id": "http://plantuml.com",
      "name": "Home"
    }
  },{
    "@type": "ListItem",
    "position": 2,
    "item": {
      "@id": "http://plantuml.com/sitemap-language-specification",
      "name": "Language specification"
    }
  },{
    "@type": "ListItem",
    "position": 3,
    "item": {
      "@id": "http://plantuml.com/sequence-diagram",
      "name": "Sequence Diagram"
  }
  }]
}
</script><link rel="canonical" href="http://plantuml.com/zh/sequence-diagram"/><link rel="alternate" hreflang="x-default" href="http://plantuml.com/sequence-diagram"/><link rel="alternate" hreflang="de" href="http://plantuml.com/de/sequence-diagram"/><link rel="alternate" hreflang="en" href="http://plantuml.com/sequence-diagram"/><link rel="alternate" hreflang="es" href="http://plantuml.com/es/sequence-diagram"/><link rel="alternate" hreflang="fr" href="http://plantuml.com/fr/sequence-diagram"/><link rel="alternate" hreflang="ja" href="http://plantuml.com/ja/sequence-diagram"/><link rel="alternate" hreflang="ru" href="http://plantuml.com/ru/sequence-diagram"/><link rel="alternate" hreflang="ko" href="http://plantuml.com/ko/sequence-diagram"/><link rel="alternate" hreflang="zh" href="http://plantuml.com/zh/sequence-diagram"/><link rel="shortcut icon" href="//s.plantuml.com/favicon.ico"/><link rel="publisher" href="https://plus.google.com/+PlantumlPublic/"/><link rel="alternate" type="application/rss+xml" title="RSS" href="http://plantuml.com/zh/sequence-diagram.rss"><title>顺序图的语法和功能</title><meta name="description" content="PlantUML序列图的语法：你可以有几种类型的参与者（演员和其他人），箭头，音符，组...改变字体和颜色也有可能。"/><meta property="og:type" content="article"/><meta property="og:title" content="顺序图的语法和功能"/><meta property="og:description" content="PlantUML序列图的语法：你可以有几种类型的参与者（演员和其他人），箭头，音符，组...改变字体和颜色也有可能。"/><meta property="og:url" content="http://plantuml.com/zh/sequence-diagram"/><meta property="og:site_name" content="PlantUML.com"/><meta name="twitter:image" content="http://plantuml.com/og-sequence-diagram"/><meta property="og:locale" content="zh"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="顺序图的语法和功能"/><meta name="twitter:description" content="PlantUML序列图的语法：你可以有几种类型的参与者（演员和其他人），箭头，音符，组...改变字体和颜色也有可能。"/><meta name="twitter:site" content="@PlantUML"/><meta name="twitter:creator" content="@PlantUML"/><style media="screen" type="text/css">li{margin:2px}#external li{margin:13px}.mycell{display:inline-block;vertical-align:top;padding:10px}#header{z-index:2;position:fixed;left:205px;right:0;height:40px;top:0;background:#edeff3}#header2{z-index:2;position:fixed;left:205px;right:0;height:10px;top:40px;background:#fefefe}#header3{z-index:3;position:fixed;left:910px;right:0;height:40px;top:0;background:#edeff3}#root{margin:50px 0 0 220px;background:#fefefe}#side{position:fixed;margin-left:0;margin-top:-50px;height:100%;width:205px;padding-top:0;background:#edeff3;z-index:2}@media screen and (max-width:1190px){#header{left:185px}#header2{left:185px}#root{margin:50px 0 0 200px}#side{width:185px}}@media screen and (max-width:1010px){#side{width:181px;margin-top:0}#root{margin:0 0 0 184px}#header,#header2{visibility:hidden}}body{margin:auto;overflow-x:hidden;background:#fefefe}a{text-decoration:none;color:#0366d6}a:hover{text-decoration:underline}#menu{border:0;font-family:Helvetica,sans-serif;font-size:14px;padding:0;margin:0;width:200%}#menu li{float:left;list-style:none;text-align:center;position:relative;margin:10px 0 0 10px;border:0}#menu li a{padding:0 7px 0 7px;text-decoration:none;color:#637282}#menu a:hover{color:#cbc9c8}#menuside{border:0;font-family:Helvetica,sans-serif;font-size:14px;padding:0;margin:0}#menuside li{list-style:none;text-align:center;position:relative;padding:0;margin:13px 20px 14px 10px;border:0}#menuside li a{display:inline-block;text-decoration:none;color:#637282;width:100%}#menuside a:hover{color:#cbc9c8}#BC{z-index:0;padding-top:5px;top:35px}.breadcrumb{font-family:Helvetica,sans-serif;font-size:14px;text-align:center;display:inline-block;overflow:hidden;border-radius:5px}.breadcrumb a{text-decoration:none;outline:0;display:block;float:left;font-size:12px;line-height:24px;color:#373f49;padding:0 10px 0 35px;background:#f0f1f1;background:linear-gradient(#f0f1f1,#c6d2d2);position:relative}.breadcrumb a:first-child{padding-left:21px;border-radius:5px 0 0 5px}.breadcrumb a:first-child:before{left:14px}.breadcrumb a:last-child{visibility:hidden}.breadcrumb a.active,.breadcrumb a:hover{color:#000;background:#c6d2d2;background:linear-gradient(#e3e4e4,#b8c7c7)}.breadcrumb a.active:after,.breadcrumb a:hover:after{background:#c6d2d2;background:linear-gradient(135deg,#e3e4e4,#b8c7c7)}.breadcrumb a:after{content:'';position:absolute;top:0;right:-12px;width:24px;height:24px;transform:scale(0.707) rotate(45deg);z-index:1;background:#f0f1f1;background:linear-gradient(135deg,#f0f1f1,#c6d2d2);box-shadow:2px -2px 0 2px rgba(0,0,0,0.1),3px -3px 0 2px rgba(255,255,255,0.1);border-radius:0 5px 0 50px}.breadcrumb a:last-child:after{content:none;visibility:hidden}.lga,.lga a,.lgi,.lgi a{font-family:Helvetica,sans-serif;font-size:13px;text-align:center;color:#fff;padding:0 5px;margin:0}.lga,.lga a{background-color:#008}.lgi,.lgi a{background-color:#888}.lga:hover,.lga:hover a{text-decoration:none;color:#BBB}.lgi:hover,.lgi:hover a{text-decoration:none;color:#CCC}</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-16629806-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date());gtag("config","UA-16629806-3");</script><script>(function(){var b=document.createElement("script"),a=document.getElementsByTagName("script")[0];b.type="text/javascript";b.async=true;b.src="http://api.flattr.com/js/0.6/load.js?mode=auto";a.parentNode.insertBefore(b,a)})();var llg="zh";</script><script async src="//s.plantuml.com/lg3.js"></script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><nav id=header><ul id="menu"><li><a id=me1 href="sequence-diagram">时序图</a></li><li><a id=me2 href="use-case-diagram">用例图</a></li><li><a id=me3 href="class-diagram">类图</a></li><li><a id=me4 href="activity-diagram-legacy">活动图</a></li><li><a id=me5 href="activity-diagram-beta">活动图 <img border=0 width=20 height=8 src=//s.plantuml.com/beta-icon.gif></a></li><li><a id=me6 href="component-diagram">组件图</a></li><li><a id=me7 href="state-diagram">状态图</a></li><li><a id=me8 href="object-diagram">对象图</a></li><li><a id=me9 href="deployment-diagram">部署图</a></li><li><a id=me10 href="timing-diagram">定时图</a></li></ul></nav><nav id=header3><ins class="adsbygoogle" style="display:inline-block;width:100%;height:40px" data-ad-client="ca-pub-5770515425712095" data-ad-slot="7824244819" data-ad-format="link" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></nav><nav id=header2></nav><nav id="side"><p><div style="height:185px;"><style>.msd{width:200px;height:185px}@media(max-width:1190px){.msd{width:180px}}</style><ins class="adsbygoogle msd" style="display:inline-block" data-ad-client="ca-pub-5770515425712095" data-ad-slot="6244156563" data-ad-format="link" data-full-width-responsive="false"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><ul id="menuside"><li><a id=me31 href="index">主页</a></li><li><a id=me32 href="news">新鲜</a></li><li><a id=me33 href="starting">入门指南</a></li><li><a id=me34 href="running">使用</a></li><li><a id=me35 href="faq">常见问题</a></li><li><a id=me36 href="dedication">贡献</a></li><li><a id=me37 href="download">下载</a></li><li><a id=me38 href="https://forum.plantuml.net">论坛 </a></li><li><a id=me39 href="preprocessing">预处理</a></li><li><a id=me40 href="commons">通用命令</a></li><li><a id=me41 href="stdlib">标准库</a></li><li><a id=me42 href="sitemap">网站地图</a></li><li><a id=me43 href="guide">用户指南(PDF)</a></li><li><a id=me44 href="external-links">外部链接</a></li></ul><p></nav><div id=root><div id=BC><div class="breadcrumb" style="z-index:1;position: relative;"><a href="sitemap">PlantUML</a><a href="sitemap-language-specification">Language specification</a><a href="sequence-diagram">Sequence Diagram</a><a href="#"></a></div><iframe style="z-index:1;position: relative;" src="//s.plantuml.com/ppbtn?190" allowtransparency="true" frameborder="0" scrolling="0" width="115" height="20"></iframe><iframe style="z-index:1;position: relative;" src="//s.plantuml.com/pnbtn?99" allowtransparency="true" frameborder="0" scrolling="0" width="115" height="20"></iframe><a href="https://liberapay.com/plantuml/donate"><img width=85 height=20 src="https://img.shields.io/liberapay/patrons/plantuml.svg?logo=liberapay"></a><p><style>.lha,.lhi{font-family:Helvetica,sans-serif;font-size:13px;display:inline-block;margin:0 5px 0 0}.lha a,.lhi a{width:70px;display:inline-block;text-align:center;vertical-align:middle;text-decoration:none;padding-top:2px;padding-bottom:2px;margin-top:5px}.lha a{background:#008;color:#fff}.lhi a{background:#888;color:#fff}.lha a:hover{color:#888;background:#22f}.lhi a:hover{color:#888;background:#22f}</style><table border=0 cellspacing=0 cellpadding=0 width=99%><tr><td><a rel="nofollow" href=translate-sequence-diagram>您可以点击此处在此页面上做出贡献</a> &nbsp;<a rel="nofollow" href=http://wiki.plantuml.net/zh/site/menu>(Menu)</a></td><td align=right><div class=lhi><a href="//plantuml.com/en/sequence-diagram" title="English" id=lgen>English</a></div><div class=lhi><a href="//plantuml.com/de/sequence-diagram" title="Deutsch" id=lgde>Deutsch</a></div><div class=lhi><a href="//plantuml.com/es/sequence-diagram" title="Español" id=lges>Español</a></div><div class=lhi><a href="//plantuml.com/fr/sequence-diagram" title="Français" id=lgfr>Français</a></div><div class=lhi><a href="//plantuml.com/ja/sequence-diagram" title="日本語" id=lgja>日本語</a></div><div class=lhi><a href="//plantuml.com/ko/sequence-diagram" title="한국어" id=lgko>한국어</a></div><div class=lhi><a href="//plantuml.com/ru/sequence-diagram" title="Русский" id=lgru>Русский</a></div><div class=lha><a href="//plantuml.com/zh/sequence-diagram" title="中文" id=lgzh>中文</a></div></td></tr></table><p></div><p><a id="1"></a><p>&nbsp;<p>&nbsp; <h1>时序图</h1><a id="2"></a><p>&nbsp;<p>&nbsp; <h2>简单示例</h2><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5770515425712095" data-ad-slot="6161423756" data-ad-format="link" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><p><style>.qsd{float:right;margin:15px 3px;width:336px;height:600px}@media(max-width:1300px){.qsd{width:300px}}@media(max-width:1250px){.qsd{width:160px}}</style><div class=qsd><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5770515425712095" data-ad-slot="8887659449" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div> 你可以用<code>-&gt;</code>来绘制参与者之间传递的消息， 而不必显式地声明参与者。 <p> 你也可以使用 <code>--&gt;</code> 绘制一个虚线箭头。 <p> 另外，你还能用 <code>&lt;-</code> 和 <code>&lt;--</code>，这不影响绘图，但可以提高可读性。 注意：仅适用于时序图，对于其它示意图，规则是不同的。 <div><div class=mycell><code><pre>
@startuml
Alice -&gt; Bob: Authentication Request
Bob --&gt; Alice: Authentication Response

Alice -&gt; Bob: Another authentication Request
Alice &lt;-- Bob: another authentication Response
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=273 height=221 class=scale src="//s.plantuml.com/imgw/sequence-diagram-bist087u.png"/></div></div><p><a id="3"></a><p>&nbsp;<p>&nbsp; <h2>声明参与者</h2><p> 关键字 <code>participant</code> 用于改变参与者的先后顺序。 <p><p> 你也可以使用其它关键字来声明参与者： <ul><li><code>actor</code></li><li><code>boundary</code></li><li><code>control</code></li><li><code>entity</code></li><li><code>database</code></li></ul><p><div><div class=mycell><code><pre>
@startuml
actor Foo1
boundary Foo2
control Foo3
entity Foo4
database Foo5
collections Foo6
Foo1 -&gt; Foo2 : To boundary
Foo1 -&gt; Foo3 : To control
Foo1 -&gt; Foo4 : To entity
Foo1 -&gt; Foo5 : To database
Foo1 -&gt; Foo6 : To collections

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=365 height=346 class=scale src="//s.plantuml.com/imgw/sequence-diagram-aorqqpri.png"/></div></div><p><p> 关键字 <code>as</code> 用于重命名参与者 <p> 你可以使用<a href="color">RGB</a>值或者颜色名修改 actor 或参与者的背景颜色。 <p><div><div class=mycell><code><pre>
@startuml
actor Bob #red
' The only difference between actor
'and participant is the drawing
participant Alice
participant "I have a really\nlong name" as L #99FF99
/' You can also declare:
   participant L as "I have a really\nlong name"  #99FF99
  '/

Alice-&gt;Bob: Authentication Request
Bob-&gt;Alice: Authentication Response
Bob-&gt;L: Log transaction
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=338 height=286 class=scale src="//s.plantuml.com/imgw/sequence-diagram-oshzxwyg.png"/></div></div><p> 您可以使用关键字 <code>order</code>自定义顺序来打印参与者。 <p><div><div class=mycell><code><pre>
@startuml
participant Last order 30
participant Middle order 20
participant First order 10
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=184 height=100 class=scale src="//s.plantuml.com/imgw/sequence-diagram-urixithp.png"/></div></div><p><p><a id="4"></a><p>&nbsp;<p>&nbsp; <h2>在参与者中使用非字母符号</h2><p><p> 你可以使用引号定义参与者，还可以用关键字 <code>as</code> 给参与者定义别名。 <div><div class=mycell><code><pre>
@startuml
Alice -&gt; "Bob()" : Hello
"Bob()" -&gt; "This is very\nlong" as Long
' You can also declare:
' "Bob()" -&gt; Long as "This is very\nlong"
Long --&gt; "Bob()" : ok
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=225 height=210 class=scale src="//s.plantuml.com/imgw/sequence-diagram-hf6oxypz.png"/></div></div><p><a id="5"></a><p>&nbsp;<p>&nbsp; <h2>给自己发消息</h2><p> 参与者可以给自己发信息， <p> 消息文字可以用<code>\n</code>来换行。 <p><div><div class=mycell><code><pre>
@startuml
Alice-&gt;Alice: This is a signal to self.\nIt also demonstrates\nmultiline \ntext
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=180 height=192 class=scale src="//s.plantuml.com/imgw/sequence-diagram-c0nalazu.png"/></div></div><p><a id="6"></a><p>&nbsp;<p>&nbsp; <h2>修改箭头样式</h2><p> 修改箭头样式的方式有以下几种: <ul><li>表示一条丢失的消息：末尾加 <code>x</code></li><li>让箭头只有上半部分或者下半部分：将<code>&lt;</code>和<code>&gt;</code>替换成<code>\</code>或者 <code>/</code></li><li>细箭头：将箭头标记写两次 (如 <code>&gt;&gt;</code> 或 <code>//</code>) </li><li>虚线箭头：用 <code>--</code> 替代 <code>-</code></li><li>箭头末尾加圈：<code>-&gt;o</code></li><li>双向箭头：<code>&lt;-&gt;</code></li></ul><p><div><div class=mycell><code><pre>
@startuml
Bob -&gt;x Alice
Bob -&gt; Alice
Bob -&gt;&gt; Alice
Bob -\ Alice
Bob \\- Alice
Bob //-- Alice

Bob -&gt;o Alice
Bob o\\-- Alice

Bob &lt;-&gt; Alice
Bob &lt;-&gt;o Alice
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=115 height=240 class=scale src="//s.plantuml.com/imgw/sequence-diagram-xjaxy4mf.png"/></div></div><p><a id="7"></a><p>&nbsp;<p>&nbsp; <h2>修改箭头颜色</h2><p> 你可以用以下记号修改箭头的颜色： <div><div class=mycell><code><pre>
@startuml
Bob -[#red]&gt; Alice : hello
Alice -[#0000FF]-&gt;Bob : ok
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=115 height=160 class=scale src="//s.plantuml.com/imgw/sequence-diagram-geydcm68.png"/></div></div><p><a id="8"></a><p>&nbsp;<p>&nbsp; <h2>对消息序列编号</h2><p><p> 关键字 <code>autonumber</code> 用于自动对消息编号。 <p><div><div class=mycell><code><pre>
@startuml
autonumber
Bob -&gt; Alice : Authentication Request
Bob &lt;- Alice : Authentication Response
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=239 height=160 class=scale src="//s.plantuml.com/imgw/sequence-diagram-iehr0zdj.png"/></div></div><p> 语句 <code>autonumber <em>start</em></code> 用于指定编号的初始值，而 <code>autonumber <em>start</em><em>increment</em></code> 可以同时指定编号的初始值和每次增加的值。 <p><p><div><div class=mycell><code><pre>
@startuml
autonumber
Bob -&gt; Alice : Authentication Request
Bob &lt;- Alice : Authentication Response

autonumber 15
Bob -&gt; Alice : Another authentication Request
Bob &lt;- Alice : Another authentication Response

autonumber 40 10
Bob -&gt; Alice : Yet another authentication Request
Bob &lt;- Alice : Yet another authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=315 height=282 class=scale src="//s.plantuml.com/imgw/sequence-diagram-jyuyuovz.png"/></div></div><p><p> 你可以在双引号内指定编号的格式。 <p> 格式是由 Java 的<code>DecimalFormat</code>类实现的： (<code>0</code> 表示数字；<code>#</code> 也表示数字，但默认为0)。 <p> 你也可以用 HTML 标签来制定格式。 <div><div class=mycell><code><pre>
@startuml
autonumber "&lt;b&gt;[000]"
Bob -&gt; Alice : Authentication Request
Bob &lt;- Alice : Authentication Response

autonumber 15 "&lt;b&gt;(&lt;u&gt;##&lt;/u&gt;)"
Bob -&gt; Alice : Another authentication Request
Bob &lt;- Alice : Another authentication Response

autonumber 40 10 "&lt;font color=red&gt;&lt;b&gt;Message 0  "
Bob -&gt; Alice : Yet another authentication Request
Bob &lt;- Alice : Yet another authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=382 height=282 class=scale src="//s.plantuml.com/imgw/sequence-diagram-www4cm6f.png"/></div></div><p> 你还可以用语句 <code>autonumber stop</code> 和 <code>autonumber resume <em>increment</em><em>format</em></code> 来表示暂停或继续使用自动编号。 <p><div><div class=mycell><code><pre>
@startuml
autonumber 10 10 "&lt;b&gt;[000]"
Bob -&gt; Alice : Authentication Request
Bob &lt;- Alice : Authentication Response

autonumber stop
Bob -&gt; Alice : dummy

autonumber resume "&lt;font color=red&gt;&lt;b&gt;Message 0  "
Bob -&gt; Alice : Yet another authentication Request
Bob &lt;- Alice : Yet another authentication Response

autonumber stop
Bob -&gt; Alice : dummy

autonumber resume 1 "&lt;font color=blue&gt;&lt;b&gt;Message 0  "
Bob -&gt; Alice : Yet another authentication Request
Bob &lt;- Alice : Yet another authentication Response
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=382 height=343 class=scale src="//s.plantuml.com/imgw/sequence-diagram-fpajttxv.png"/></div></div><p><p><a id="9"></a><p>&nbsp;<p>&nbsp; <h2>Page Title, Header and Footer</h2><p> The <code>title</code> keyword is used to add a title to the page. <p> Pages can display headers and footers using <code>header</code> and <code>footer</code>. <p><div><div class=mycell><code><pre>
@startuml

header Page Header
footer Page %page% of %lastpage%

title Example Title

Alice -&gt; Bob : message 1
Alice -&gt; Bob : message 2

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=157 height=229 class=scale src="//s.plantuml.com/imgw/sequence-diagram-3qtdfn4l.png"/></div></div><p><a id="10"></a><p>&nbsp;<p>&nbsp; <h2>分割示意图</h2><p><p> 关键字 <code>newpage</code> 用于把一张图分割成多张。 <p> 在 <code>newpage</code> 之后添加文字，作为新的示意图的标题。 <p> 这样就能很方便地在 <em>Word</em> 中将长图分几页打印。 <div><div class=mycell><code><pre>
@startuml

Alice -&gt; Bob : message 1
Alice -&gt; Bob : message 2

newpage

Alice -&gt; Bob : message 3
Alice -&gt; Bob : message 4

newpage A title for the\nlast page

Alice -&gt; Bob : message 5
Alice -&gt; Bob : message 6
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=157 height=161 class=scale src="//s.plantuml.com/imgw/sequence-diagram-vu3rd1pj.png"/></div></div><p><a id="11"></a><p>&nbsp;<p>&nbsp; <h2>组合消息</h2><p><p> 我们可以通过以下关键词将组合消息： <ul><li><code>alt/else</code></li><li><code>opt</code></li><li><code>loop</code></li><li><code>par</code></li><li><code>break</code></li><li><code>critical</code></li><li><code>group</code>, 后面紧跟着消息内容</li></ul><p><p> 可以在标头(header)添加需要显示的文字(<code>group</code>除外)。 <p> 关键词 <code>end</code> 用来结束分组。 <p> 注意，分组可以嵌套使用。 <p><div><div class=mycell><code><pre>
@startuml
Alice -&gt; Bob: Authentication Request

alt successful case

	Bob -&gt; Alice: Authentication Accepted
	
else some kind of failure

	Bob -&gt; Alice: Authentication Failure
	group My own label
		Alice -&gt; Log : Log attack start
	    loop 1000 times
	        Alice -&gt; Bob: DNS Attack
	    end
		Alice -&gt; Log : Log attack end
	end
	
else Another type of failure

   Bob -&gt; Alice: Please repeat
   
end
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=337 height=441 class=scale src="//s.plantuml.com/imgw/sequence-diagram-ogvjfwwz.png"/></div></div><p><a id="12"></a><p>&nbsp;<p>&nbsp; <h2>给消息添加注释</h2><p> 我们可以通过在消息后面添加 <code>note left</code> 或者 <code>note right</code> 关键词来给消息添加注释。 <p> 你也可以通过使用 <code>end note</code> 来添加多行注释。 <p><div><div class=mycell><code><pre>
@startuml
Alice-&gt;Bob : hello
note left: this is a first note

Bob-&gt;Alice : ok
note right: this is another note

Bob-&gt;Bob : I am thinking
note left
	a note
	can also be defined
	on several lines
end note
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=341 height=253 class=scale src="//s.plantuml.com/imgw/sequence-diagram-n5vam1zd.png"/></div></div><p><a id="13"></a><p>&nbsp;<p>&nbsp; <h2>其他的注释</h2><p><p> 可以使用<code>note left of</code>，<code>note right of</code>或<code>note over</code>在节点(participant)的相对位置放置注释。 <p> 还可以通过修改<a href="color">背景色</a>来高亮显示注释。 <p> 以及使用关键字<code>end note</code>来添加多行注释。 <p><div><div class=mycell><code><pre>
@startuml
participant Alice
participant Bob
note left of Alice #aqua
	This is displayed 
	left of Alice. 
end note
 
note right of Alice: This is displayed right of Alice.

note over Alice: This is displayed over Alice.

note over Alice, Bob #FFAAAA: This is displayed\n over Bob and Alice.

note over Bob, Alice
	This is yet another
	example of
	a long note.
end note
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=353 height=367 class=scale src="//s.plantuml.com/imgw/sequence-diagram-7yjakzb0.png"/></div></div><p><a id="14"></a><p>&nbsp;<p>&nbsp; <h2>改变备注框的形状</h2><p> 你可以使用 <code>hnote</code> 和 <code>rnote</code> 这两个关键字来修改备注框的形状。 <div><div class=mycell><code><pre>
@startuml
caller -&gt; server : conReq
hnote over caller : idle
caller &lt;- server : conConf
rnote over server
 "r" as rectangle
 "h" as hexagon
endrnote
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=163 height=245 class=scale src="//s.plantuml.com/imgw/sequence-diagram-kxm8fpkz.png"/></div></div><p><a id="15"></a><p>&nbsp;<p>&nbsp; <h2>Creole和HTML</h2><p><a href="creole">可以使用creole格式。</a><p><div><div class=mycell><code><pre>
@startuml
participant Alice
participant "The **Famous** Bob" as Bob

Alice -&gt; Bob : hello --there--
... Some ~~long delay~~ ...
Bob -&gt; Alice : ok
note left
  This is **bold**
  This is //italics//
  This is ""monospaced""
  This is --stroked--
  This is __underlined__
  This is ~~waved~~
end note

Alice -&gt; Bob : A //well formatted// message
note right of Alice 
 This is &lt;back:cadetblue&gt;&lt;size:18&gt;displayed&lt;/size&gt;&lt;/back&gt; 
 __left of__ Alice. 
end note
note left of Bob 
 &lt;u:red&gt;This&lt;/u&gt; is &lt;color #118888&gt;displayed&lt;/color&gt; 
 **&lt;color purple&gt;left of&lt;/color&gt; &lt;s:red&gt;Alice&lt;/strike&gt; Bob**. 
end note
note over Alice, Bob
 &lt;w:#FF33FF&gt;This is hosted&lt;/w&gt; by &lt;img sourceforge.jpg&gt;
end note 
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=405 height=500 class=scale src="//s.plantuml.com/imgw/sequence-diagram-c86njc7j.png"/></div></div><p><a id="16"></a><p>&nbsp;<p>&nbsp; <h2>分隔符</h2><p><p> 你可以通过使用 <code>==</code> 关键词来将你的图表分割多个步骤。 <div><div class=mycell><code><pre>
@startuml

== Initialization ==

Alice -&gt; Bob: Authentication Request
Bob --&gt; Alice: Authentication Response

== Repetition ==

Alice -&gt; Bob: Another authentication Request
Alice &lt;-- Bob: another authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=283 height=310 class=scale src="//s.plantuml.com/imgw/sequence-diagram-t9fmeink.png"/></div></div><p><a id="17"></a><p>&nbsp;<p>&nbsp; <h3>= 引用 =</h3><p> 你可以在图中通过使用<code>ref over</code>关键词来实现引用 <div><div class=mycell><code><pre>
@startuml
participant Alice
actor Bob

ref over Alice, Bob : init

Alice -&gt; Bob : hello

ref over Bob
  This can be on
  several lines
end ref
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=167 height=337 class=scale src="//s.plantuml.com/imgw/sequence-diagram-iuckl9um.png"/></div></div><p><a id="18"></a><p>&nbsp;<p>&nbsp; <h3>= 延迟 =</h3><p> 你可以使用<code>...</code>来表示延迟，并且还可以给延迟添加注释。 <div><div class=mycell><code><pre>
@startuml

Alice -&gt; Bob: Authentication Request
...
Bob --&gt; Alice: Authentication Response
...5 minutes latter...
Bob --&gt; Alice: Bye !

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=228 height=261 class=scale src="//s.plantuml.com/imgw/sequence-diagram-g9oapdvr.png"/></div></div><p><a id="19"></a><p>&nbsp;<p>&nbsp; <h3>= 空间 =</h3><p><p> 你可以使用<code>|||</code>来增加空间。 <p> 还可以使用数字指定增加的像素的数量。 <div><div class=mycell><code><pre>
@startuml

Alice -&gt; Bob: message 1
Bob --&gt; Alice: ok
|||
Alice -&gt; Bob: message 2
Bob --&gt; Alice: ok
||45||
Alice -&gt; Bob: message 3
Bob --&gt; Alice: ok

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=147 height=352 class=scale src="//s.plantuml.com/imgw/sequence-diagram-z53mvpax.png"/></div></div><p><a id="20"></a><p>&nbsp;<p>&nbsp; <h2>生命线的激活与撤销</h2><p> 关键字<code>activate</code>和<code>deactivate</code>用来表示参与者的生命活动。 <p> 一旦参与者被激活，它的生命线就会显示出来。 <p><code>activate</code>和<code>deactivate</code>适用于以上情形。 <p><code>destroy</code>表示一个参与者的生命线的终结。 <p><div><div class=mycell><code><pre>
@startuml
participant User

User -&gt; A: DoWork
activate A

A -&gt; B: &lt;&lt; createRequest &gt;&gt;
activate B

B -&gt; C: DoWork
activate C
C --&gt; B: WorkDone
destroy C

B --&gt; A: RequestCreated
deactivate B

A -&gt; User: Done
deactivate A

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=370 height=282 class=scale src="//s.plantuml.com/imgw/sequence-diagram-nw93mwra.png"/></div></div><p><p> 还可以使用嵌套的生命线，并且运行给生命线添加颜色。 <p><div><div class=mycell><code><pre>
@startuml
participant User

User -&gt; A: DoWork
activate A #FFBBBB

A -&gt; A: Internal call
activate A #DarkSalmon

A -&gt; B: &lt;&lt; createRequest &gt;&gt;
activate B

B --&gt; A: RequestCreated
deactivate B
deactivate A
A -&gt; User: Done
deactivate A

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=280 height=264 class=scale src="//s.plantuml.com/imgw/sequence-diagram-vnro1jfh.png"/></div></div><p><a id="21"></a><p>&nbsp;<p>&nbsp; <h2>Return</h2><p> A new command <code>return</code> for generating a return message with optional text label. The point returned to is the point that cause the most recently activated life-line. The syntax is simply return label where label, if provided, can be any string acceptable on conventional messages. <div><div class=mycell><code><pre>
@startuml
Bob -&gt; Alice : hello
activate Alice
Alice -&gt; Alice : some action
return bye
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=179 height=204 class=scale src="//s.plantuml.com/imgw/sequence-diagram-ottrg75b.png"/></div></div><p><p><a id="22"></a><p>&nbsp;<p>&nbsp; <h2>创建参与者</h2><p><p> 你可以把关键字<code>create</code>放在第一次接收到消息之前，以强调本次消息实际上是在<em>创建</em>新的对象。 <div><div class=mycell><code><pre>
@startuml
Bob -&gt; Alice : hello

create Other
Alice -&gt; Other : new

create control String
Alice -&gt; String
note right : You can also put notes!

Alice --&gt; Bob : ok

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=412 height=294 class=scale src="//s.plantuml.com/imgw/sequence-diagram-yllwkutt.png"/></div></div><p><a id="23"></a><p>&nbsp;<p>&nbsp; <h2>进入和发出消息</h2><p> 如果只想关注部分图示，你可以使用进入和发出箭头。 <p> 使用方括号<code>[</code>和<code>]</code>表示图示的左、右两侧。 <div><div class=mycell><code><pre>
@startuml
[-&gt; A: DoWork

activate A

A -&gt; A: Internal call
activate A

A -&gt;] : &lt;&lt; createRequest &gt;&gt;

A&lt;--] : RequestCreated
deactivate A
[&lt;- A: Done
deactivate A
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=242 height=264 class=scale src="//s.plantuml.com/imgw/sequence-diagram-wnzeg2wr.png"/></div></div><p><p> 还可以使用下面的语法: <div><div class=mycell><code><pre>
@startuml
[-&gt; Bob
[o-&gt; Bob
[o-&gt;o Bob
[x-&gt; Bob

[&lt;- Bob
[x&lt;- Bob

Bob -&gt;]
Bob -&gt;o]
Bob o-&gt;o]
Bob -&gt;x]

Bob &lt;-]
Bob x&lt;-]
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=77 height=268 class=scale src="//s.plantuml.com/imgw/sequence-diagram-yolxaml4.png"/></div></div><p><a id="24"></a><p>&nbsp;<p>&nbsp; <h2>构造类型和圈点</h2><p><p><p> 可以使用<code>&lt;&lt;</code>和<code>&gt;&gt;</code>给参与者添加构造类型。 <p> 在构造类型中，你可以使用<code>(X,color)</code>格式的语法添加一个圆圈圈起来的字符。 <div><div class=mycell><code><pre>
@startuml

participant "Famous Bob" as Bob &lt;&lt; Generated &gt;&gt;
participant Alice &lt;&lt; (C,#ADD1B2) Testable &gt;&gt;

Bob-&gt;Alice: First message

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=243 height=165 class=scale src="//s.plantuml.com/imgw/sequence-diagram-l1nndofu.png"/></div></div><p> 默认使用 <em>guillemet</em> 字符来显示构造类型。 你可以使用外观参数 <code>guillemet</code> 来修改显示行为。 <p><div><div class=mycell><code><pre>
@startuml

skinparam guillemet false
participant "Famous Bob" as Bob &lt;&lt; Generated &gt;&gt;
participant Alice &lt;&lt; (C,#ADD1B2) Testable &gt;&gt;

Bob-&gt;Alice: First message

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=291 height=165 class=scale src="//s.plantuml.com/imgw/sequence-diagram-jrrc8nwl.png"/></div></div><p><div><div class=mycell><code><pre>
@startuml

participant Bob &lt;&lt; (C,#ADD1B2) &gt;&gt;
participant Alice &lt;&lt; (C,#ADD1B2) &gt;&gt;

Bob-&gt;Alice: First message

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=194 height=139 class=scale src="//s.plantuml.com/imgw/sequence-diagram-pzyrs6rf.png"/></div></div><p><a id="25"></a><p>&nbsp;<p>&nbsp; <h2>更多标题信息</h2><p> 你可以在标题中使用<a href="creole">creole</a>格式。 <p><div><div class=mycell><code><pre>
@startuml

title __Simple__ **communication** example

Alice -&gt; Bob: Authentication Request
Bob -&gt; Alice: Authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=243 height=192 class=scale src="//s.plantuml.com/imgw/sequence-diagram-ud8yadx3.png"/></div></div> 在标题描述中使用<code>\n</code>表示换行。 <div><div class=mycell><code><pre>
@startuml

title __Simple__ communication example\non several lines

Alice -&gt; Bob: Authentication Request
Bob -&gt; Alice: Authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=243 height=210 class=scale src="//s.plantuml.com/imgw/sequence-diagram-ng7do55n.png"/></div></div> 还可以使用关键字<code>title</code>和<code>end title</code>定义多行标题。 <div><div class=mycell><code><pre>
@startuml

title
 &lt;u&gt;Simple&lt;/u&gt; communication example
 on &lt;i&gt;several&lt;/i&gt; lines and using &lt;font color=red&gt;html&lt;/font&gt;
 This is hosted by &lt;img:sourceforge.jpg&gt;
end title

Alice -&gt; Bob: Authentication Request
Bob -&gt; Alice: Authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=249 height=241 class=scale src="//s.plantuml.com/imgw/sequence-diagram-qpatyftb.png"/></div></div><p><a id="26"></a><p>&nbsp;<p>&nbsp; <h2>包裹参与者</h2><p><p><p> 可以使用<code>box</code>和<code>end box</code>画一个盒子将参与者包裹起来。 <p> 还可以在<code>box</code>关键字之后添加标题或者背景颜色。 <p><div><div class=mycell><code><pre>
@startuml

box "Internal Service" #LightBlue
	participant Bob
	participant Alice
end box
participant Other

Bob -&gt; Alice : hello
Alice -&gt; Other : hello

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=179 height=191 class=scale src="//s.plantuml.com/imgw/sequence-diagram-vf3oamwd.png"/></div></div><p><a id="27"></a><p>&nbsp;<p>&nbsp; <h2>移除脚注</h2><p> 使用<code>hide footbox</code>关键字移除脚注。 <p><div><div class=mycell><code><pre>
@startuml

hide footbox
title Footer removed

Alice -&gt; Bob: Authentication Request
Bob --&gt; Alice: Authentication Response

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=228 height=162 class=scale src="//s.plantuml.com/imgw/sequence-diagram-ay7vrlzt.png"/></div></div><p><a id="28"></a><p>&nbsp;<p>&nbsp; <h2>外观参数(skinparam)</h2><p><p> 用<code><a href="skinparam">skinparam</a></code>改变字体和颜色。 <p> 可以在如下场景中使用： <ul><li> 在图示的定义中，</li><li><a href="preprocessing">在引入的文件中</a>，</li><li> 在<a href="command-line">命令行</a>或者<a href="ant-task">ANT任务</a>提供的配置文件中。</li></ul><p> 你也可以修改其他渲染元素，如以下示例： <p><div><div class=mycell><code><pre>
@startuml
skinparam sequenceArrowThickness 2
skinparam roundcorner 20
skinparam maxmessagesize 60
skinparam sequenceParticipant underline

actor User
participant "First Class" as A
participant "Second Class" as B
participant "Last Class" as C

User -&gt; A: DoWork
activate A

A -&gt; B: Create Request
activate B

B -&gt; C: DoWork
activate C
C --&gt; B: WorkDone
destroy C

B --&gt; A: Request Created
deactivate B

A --&gt; User: Done
deactivate A

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=354 height=410 class=scale src="//s.plantuml.com/imgw/sequence-diagram-k23ravsq.png"/></div></div><p><div><div class=mycell><code><pre>
@startuml
skinparam backgroundColor #EEEBDC
skinparam handwritten true

skinparam sequence {
	ArrowColor DeepSkyBlue
	ActorBorderColor DeepSkyBlue
	LifeLineBorderColor blue
	LifeLineBackgroundColor #A9DCDF
	
	ParticipantBorderColor DeepSkyBlue
	ParticipantBackgroundColor DodgerBlue
	ParticipantFontName Impact
	ParticipantFontSize 17
	ParticipantFontColor #A9DCDF
	
	ActorBackgroundColor aqua
	ActorFontColor DeepSkyBlue
	ActorFontSize 17
	ActorFontName Aapex
}

actor User
participant "First Class" as A
participant "Second Class" as B
participant "Last Class" as C

User -&gt; A: DoWork
activate A

A -&gt; B: Create Request
activate B

B -&gt; C: DoWork
activate C
C --&gt; B: WorkDone
destroy C

B --&gt; A: Request Created
deactivate B

A --&gt; User: Done
deactivate A

@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=395 height=384 class=scale src="//s.plantuml.com/imgw/sequence-diagram-0cc3yfdr.png"/></div></div><p><p><a id="29"></a><p>&nbsp;<p>&nbsp; <h2>填充区设置</h2><p><p> 可以设定填充区的参数配置。 <p><div><div class=mycell><code><pre>
@startuml
skinparam ParticipantPadding 20
skinparam BoxPadding 10

box "Foo1"
participant Alice1
participant Alice2
end box
box "Foo2"
participant Bob1
participant Bob2
end box
Alice1 -&gt; Bob1 : hello
Alice1 -&gt; Out : out
@enduml
</pre></code></div><div class=mycell><img border="2" title="foo" width=529 height=191 class=scale src="//s.plantuml.com/imgw/sequence-diagram-y9c59yfw.png"/></div></div><p><p><p><hr><p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-format="fluid" data-ad-layout="in-article" data-ad-client="ca-pub-5770515425712095" data-ad-slot="4513300169"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><p><footer><table width=100% border=0><tr align=center><td width=20%><iframe src="//s.plantuml.com/ppbtn?190" allowtransparency="true" frameborder="0" scrolling="0" width="115" height="20"></iframe></td><td width=20%><iframe src="//s.plantuml.com/pnbtn?99" allowtransparency="true" frameborder="0" scrolling="0" width="115" height="20"></iframe></td><td width=20%><a href="https://liberapay.com/plantuml/donate"><img width=85 height=20 src="https://img.shields.io/liberapay/patrons/plantuml.svg?logo=liberapay"></a></td><td width=20%><script id="_wau1ft">var _wau=_wau||[];_wau.push(["small","vwt5xirsg4hh","1ft"]);(function(){var a=document.createElement("script");a.async=true;a.src="//widgets.amung.us/small.js";document.getElementsByTagName("head")[0].appendChild(a)})();</script></td><td width=20%><a href=https://www.ej-technologies.com/products/jprofiler/overview.html title="JProfiler"><img width=92 height=26 alt="JProfiler" src=//s.plantuml.com/jprofiler_small.png></a></td></tr></table></footer></div><script>var sc_project=11129481;var sc_invisible=1;var sc_security="bd89fcfd";</script><script src="http://www.statcounter.com/counter/counter.js"></script></body></html>